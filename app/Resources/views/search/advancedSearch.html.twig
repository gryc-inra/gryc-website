{% extends 'base.html.twig' %}

{%block title %}
    Advanced search
{% endblock %}

{% block breadcrumb %}
    {{ parent() }}
    <li class="active">Advanced search</li>
{% endblock %}

{% block body %}
    <h1>Advanced search</h1>
    <p>
        The advanced search work exactly like the quick-search (the top right field on every pages), but permit you to
        select in which strains you want to do the search. Then the advanced search is usefull when you have too many
        results in the quick search.
    </p>

    <hr>

    <div class="row">
        {{ form_start(form) }}
            {{ form_row(form.search) }}
            {{ form_row(form.strainsFilter) }}
            {{ form_row(form.strains) }}

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default">
                        <span class="fa fa-search" aria-hidden="true"></span> Search
                    </button>
                </div>
            </div>

            {{ form_rest(form) }}
        {{ form_end(form) }}
    </div>

    <div class="row">
        {% include ":search:searchResults.html.twig" with { 'search': search } %}
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            strainsFilter($( "#advanced_search_strains" ), $( "#advanced_search_strainsFilter" ));
        });

        $(document).ready(function() {
            $(".search-result > p").each( function() {
                var html = $(this).html();
                html = html.replace(/({{ search }})/gi, '<b>$1</b>');
                $(this).html(html);
            });
        });
    </script>
{% endblock %}
