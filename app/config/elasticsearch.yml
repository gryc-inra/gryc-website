#FOSElasticaBundle
fos_elastica:
    clients:
        default: { host: "%elasticsearch_host%", port: "%elasticsearch_port%" }
    indexes:
        app:
            client: default
            finder: ~
            settings:
                index:
                    analysis:
                        analyzer:
                            search:
                                type: custom
                                tokenizer: standard
                                filter: [asciifolding, lowercase]
                            edge_ngram:
                                type: custom
                                tokenizer: standard
                                filter: [asciifolding, lowercase, edge_ngram]
                            english_light:
                                type: custom
                                tokenizer: standard
                                filter: [asciifolding, lowercase]
                            english_heavy:
                                type: custom
                                tokenizer: standard
                                filter: [asciifolding, lowercase, english_stemmer]
                        filter:
                            edge_ngram:
                                type: edgeNGram
                                side: front
                                min_gram: 7
                                max_gram: 30
                                token_chars: ['letter', 'digit', 'whitespace', 'punctuation', 'symbol']
                            english_stemmer:
                                type: stemmer
                                name: light_english
            types:
                locus:
                    properties:
                        name:
                            type:                   text
                            fields:
                                ngramed:
                                    type:             text
                                    analyzer :        edge_ngram
                                    search_analyzer:  search
                        annotation:
                            type:                     object
                        note:
                            type:                     text
                            analyzer:                 english_light
                            fields:
                                stemmed:
                                    type:     text
                                    analyzer: english_heavy
                        public:
                            property_path:    chromosome.strain.public
                        authorized_users_id:
                            property_path:    chromosome.strain.authorizedUsersId
                    persistence:
                      driver:                 orm
                      model:                  AppBundle\Entity\Locus
                      provider:               ~
                      listener:               ~
                      finder:                 ~
                      repository:             AppBundle\SearchRepository\LocusRepository
                feature:
                    properties:
                        name:
                            type:                   text
                            fields:
                                ngramed:
                                    type:             text
                                    analyzer :        edge_ngram
                                    search_analyzer:  search
                        annotation:
                            type:             object
                        note:
                            type:             text
                            analyzer:         english_light
                            fields:
                                stemmed:
                                    type:     text
                                    analyzer: english_heavy
                        public:
                            property_path:    locus.chromosome.strain.public
                        authorized_users_id:
                            property_path:    locus.chromosome.strain.authorizedUsersId
                    persistence:
                      driver:                 orm
                      model:                  AppBundle\Entity\Feature
                      provider:               ~
                      listener:               ~
                      finder:                 ~
                      repository:             AppBundle\SearchRepository\FeatureRepository
                product:
                    properties:
                        name:
                            type:                   text
                            fields:
                                ngramed:
                                    type:             text
                                    analyzer :        edge_ngram
                                    search_analyzer:  search
                        annotation:
                            type:             object
                        note:
                            type:             text
                            analyzer:         english_light
                            fields:
                                stemmed:
                                    type:     text
                                    analyzer: english_heavy
                        public:
                            property_path:    feature.locus.chromosome.strain.public
                        authorized_users_id:
                            property_path:    feature.locus.chromosome.strain.authorizedUsersId
                    persistence:
                      driver:                 orm
                      model:                  AppBundle\Entity\Product
                      provider:               ~
                      listener:               ~
                      finder:                 ~
                      repository:             AppBundle\SearchRepository\ProductRepository
